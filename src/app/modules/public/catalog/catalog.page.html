<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/splash" text=""></ion-back-button>
    </ion-buttons>
    <div class="header-logo">
      <img src="assets/images/logoTigo.png" alt="Tigo" class="header-logo-img">
    </div>
    <ion-buttons slot="end">
      <ion-button (click)="onProfileClick()" fill="solid">
        <ion-icon name="person-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="catalog-content">
  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="hero-content">
      <h1>TIGO<span class="conecta">Conecta</span></h1>
      <p class="hero-tagline">Elige tu plan perfecto</p>
    </div>
  </div>

  <!-- Filter Section - Horizontal Scroll -->
  <div class="filter-section">
    <div class="filter-header">
      <h3>Por Segmento</h3>
    </div>
    <div class="filter-chips">
      <ion-chip 
        *ngFor="let seg of ['todos', 'Básico', 'Medio', 'Premium']"
        [class.active]="selectedSegment === seg"
        (click)="filterBySegment({detail: {value: seg}})"
        outline="true"
      >
        <ion-label>{{ seg === 'todos' ? 'Ver Todo' : seg }}</ion-label>
      </ion-chip>
    </div>
  </div>

  <!-- Plans List View (Alternative to Grid) -->
  <div class="plans-list-container">
    <div *ngIf="(planes$ | async) as plans; else noplans" class="plans-list">
      
      <!-- Compact Plan Card in Horizontal Layout -->
      <div 
        *ngFor="let plan of plans; let i = index"
        class="plan-item-horizontal"
        (click)="goToDetail(plan.id)"
      >
        <!-- Left: Image/Badge -->
        <div class="plan-thumbnail">
          <div *ngIf="plan.imagen_url" class="thumbnail-image">
            <img [src]="plan.imagen_url" [alt]="plan.nombre">
          </div>
          <div *ngIf="!plan.imagen_url" class="thumbnail-placeholder">
            <ion-icon name="call"></ion-icon>
          </div>
          <div class="segment-badge">{{ plan.segmento }}</div>
        </div>

        <!-- Center: Info -->
        <div class="plan-info">
          <h4 class="plan-title">{{ plan.nombre }}</h4>
          <p class="plan-desc-short">{{ plan.descripcion | slice:0:60 }}...</p>
          <div class="plan-specs">
            <span class="spec-item">
              <ion-icon name="cellular"></ion-icon>
              {{ plan.datos_moviles }}
            </span>
            <span class="spec-separator">•</span>
            <span class="spec-item">
              <ion-icon name="call"></ion-icon>
              {{ plan.minutos_voz }}
            </span>
          </div>
        </div>

        <!-- Right: Price & CTA -->
        <div class="plan-price-cta">
          <div class="price-box">
            <span class="price-amount">${{ plan.precio }}</span>
            <span class="price-period">/mes</span>
          </div>
          <ion-icon name="chevron-forward" class="chevron-icon"></ion-icon>
        </div>
      </div>

    </div>

    <ng-template #noplans>
      <div class="no-plans">
        <ion-icon name="sad-outline"></ion-icon>
        <p>No hay planes disponibles en este momento</p>
      </div>
    </ng-template>
  </div>

  <!-- Info Section at Bottom -->
  <div class="info-banner">
    <div class="info-content">
      <ion-icon name="information-circle-outline"></ion-icon>
      <p>Toca cualquier plan para ver todos los detalles y características completas</p>
    </div>
  </div>
</ion-content>
